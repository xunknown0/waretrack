<div class="container-fluid px-4 mt-4">
    <h2 class="fw-bold mb-4">Dashboard</h2>
<div class="row g-4 mb-5">

  <% const stats = [
    { title: 'Total Products', value: totalProducts, icon: 'fas fa-boxes', bg: 'bg-gradient-primary', text: 'text-white', footer: { text: 'View Inventory', link: '/products' } },
    { title: 'Total Sales', value: 0, icon: 'fas fa-hand-holding-usd', bg: 'bg-gradient-success', text: 'text-white' },
    { title: 'Total Stock', value: totalStock, icon: 'fas fa-warehouse', bg: 'bg-gradient-warning', text: 'text-dark' },
    { title: 'Total Users', value: '', icon: 'fas fa-users', bg: 'bg-gradient-info', text: 'text-white' }
  ] %>

  <% stats.forEach(stat => { %>
    <div class="col-md-6 col-lg-3">
      <div class="card border-0 shadow-sm overflow-hidden h-100 <%= stat.bg %> <%= stat.text %> card-hover">
        <div class="card-body d-flex align-items-center justify-content-between p-4">
          <div class="text-start">
            <p class="text-uppercase small fw-semibold mb-1 opacity-75"><%= stat.title %></p>
            <h3 class="fw-bolder mb-0 display-6 counter" data-target="<%= stat.value %>">0</h3>
          </div>
          <div class="icon-circle <%= stat.text === 'text-dark' ? 'bg-dark bg-opacity-10' : 'bg-white bg-opacity-10' %> p-3 rounded-circle">
            <i class="<%= stat.icon %> fa-2x"></i>
          </div>
        </div>
        <% if(stat.footer){ %>
          <div class="card-footer bg-white bg-opacity-10 border-0 p-2 small text-center">
            <a href="<%= stat.footer.link %>" class="<%= stat.text %> text-decoration-none fw-medium">
              <%= stat.footer.text %> <i class="fas fa-arrow-circle-right ms-1"></i>
            </a>
          </div>
        <% } %>
      </div>
    </div>
  <% }) %>

</div>


  <div class="row">
    <div class="col">

    </div>
      <div class="col">
      <!-- Products Table -->
<div class="table-responsive">
  <table class="table table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th>SKU</th>
        <th>Product Name</th>
        <th>Category</th>
        <th>Stock</th>
        <th>Price</th>
      </tr>
    </thead>
    <tbody>
      <% if(products && products.length > 0){ %>
        <% products.forEach(product => { %>
          <tr>
            <td><span class="fw-semibold"><%= product.sku %></span></td>
            <td><span><%= product.title %></span></td>
            <td>
              <span class="text-muted">
                <% if(product.category && product.category.name){ 
                     let parentName = (product.category.parent && product.category.parent.name) 
                                       ? product.category.parent.name + ' > ' 
                                       : '';
                %>
                  <%= parentName + product.category.name %>
                <% } else { %>
                  -
                <% } %>
              </span>
            </td>
            <td>
              <span class="badge <%= product.stock > 5 ? 'bg-success' : product.stock > 0 ? 'bg-warning text-dark' : 'bg-danger' %>">
                <%= product.stock %>
              </span>
            </td>
            <td class="fw-bold">â‚±<%= product.price.toFixed(2) %></td>
          </tr>
        <% }) %>
      <% } else { %>
        <tr>
          <td colspan="5" class="text-center text-muted">No products found.</td>
        </tr>
      <% } %>
    </tbody>
  </table>
</div>

<!-- Pagination -->
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center mt-3">
    <!-- Previous button -->
    <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
      <a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a>
    </li>

    <!-- Page numbers -->
    <% for(let i = 1; i <= totalPages; i++){ %>
      <li class="page-item <%= i === currentPage ? 'active' : '' %>">
        <a class="page-link" href="?page=<%= i %>"><%= i %></a>
      </li>
    <% } %>

    <!-- Next button -->
    <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
      <a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a>
    </li>
  </ul>
</nav>

    </div>

    </div>



<style>
  .table-hover tbody tr:hover {
    background-color: rgba(0, 123, 255, 0.1);
    transition: background-color 0.3s;
  }
</style>

</div>
